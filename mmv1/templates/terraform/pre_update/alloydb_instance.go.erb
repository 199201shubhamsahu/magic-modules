// Avoid modifying instance type. No use case for this

// Secondary instances can not be created in primary cluster and vice versa.
// Default change is destroy before create, so modifcation from primary <-> secondary will only delete the instance with failure to create the instance.
if d.HasChange("instance_type") {
    return fmt.Errorf("Can not change instance type after creation.")

// If the SSL mode isn't specified in the update, retain the SSL mode that's already present
if d.HasChange("client_connection_config.0.ssl_config.0.ssl_mode") {
  old, new := d.GetChange("client_connection_config.0.ssl_config.0.ssl_mode")
  if tpgresource.IsEmptyValue(reflect.ValueOf(new)) {
    var c map[string]interface{}
    if obj["clientConnectionConfig"] == nil {
      c = make(map[string]interface{})
    } else {
      c = obj["clientConnectionConfig"].(map[string]interface{})
    }
    var s map[string]interface{}
    if c["sslConfig"] == nil {
      s = make(map[string]interface{})
    } else {
      s = c["sslConfig"].(map[string]interface{})
    }
    if tpgresource.IsEmptyValue(reflect.ValueOf(old)) {
      s["sslMode"] = "ENCRYPTED_ONLY"
    } else {
      s["sslMode"] = old
    }
    c["sslConfig"] = s
    obj["clientConnectionConfig"] = c
  }
}